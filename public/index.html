<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chocolate - Coffee Shop</title>

    <!-- UIKit CSS -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.19.4/css/uikit.min.css"
    />

    <!-- Custom CSS Files - USANDO TUS ESTILOS EXACTOS -->
    <link rel="stylesheet" href="../assets/css/index.css" />
    <link rel="stylesheet" href="../assets/css/blog.css" />

    <!-- UIKit JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.19.4/js/uikit.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.19.4/js/uikit-icons.min.js"></script>
  </head>
  <body>
    <!-- Navbar - EXACTO AL ORIGINAL -->
    <div
      uk-sticky="sel-target: .uk-navbar-container; cls-active: uk-navbar-sticky"
    >
      <nav class="uk-navbar-container uk-navbar-transparent">
        <div class="uk-container uk-width-1-1 background-opaque">
          <div uk-navbar="mode: click" class="uk-flex">
            <!-- Navbar Left -->
            <div class="uk-navbar-left">
              <div class="uk-navbar-item uk-light">
                <a class="uk-flex uk-link-heading" href="/">
                  <img src="../assets/img/coffe-user-logo.svg" alt="Logo" />
                  <button
                    class="uk-margin-left uk-text-capitalize uk-text-left uk-text-small uk-button uk-button-link"
                  >
                    <strong
                      >Chocolate<br /><span id="current-user"
                        >Invitado</span
                      ></strong
                    >
                  </button>
                </a>
              </div>
            </div>

            <!-- Navbar Center -->
            <div class="uk-navbar-center uk-visible@l">
              <div class="uk-navbar-item uk-dark">
                <a
                  class="uk-button uk-button-secondary uk-border-rounded"
                  href="api.html"
                >
                  API
                </a>
              </div>
              <div class="uk-navbar-item uk-light">
                <a
                  class="uk-text-capitalize uk-button uk-button-text uk-light"
                  href="menu.html"
                >
                  Menú
                </a>
              </div>
              <div class="uk-navbar-item uk-light">
                <a
                  class="uk-text-capitalize uk-button uk-button-text"
                  href="recomendado.html"
                >
                  Recomendado
                </a>
              </div>
              <div class="uk-navbar-item uk-light">
                <a
                  class="uk-text-capitalize uk-button uk-button-text uk-light"
                  href="blog.html"
                >
                  Blog
                </a>
              </div>
              <div class="uk-navbar-item uk-light">
                <a
                  class="uk-text-capitalize uk-button uk-button-text uk-light"
                  href="nosotros.html"
                >
                  Nosotros
                </a>
              </div>
            </div>

            <!-- Navbar Right -->
            <div class="uk-navbar-right uk-visible@l">
              <div class="uk-navbar-item uk-light">
                <button
                  id="auth-btn"
                  class="uk-text-capitalize uk-text-normal uk-button uk-button-secondary uk-border-rounded"
                  onclick="toggleAuth()"
                >
                  Iniciar Sesión
                </button>
              </div>
              <div class="uk-navbar-item uk-dark">
                <a
                  class="uk-text-capitalize uk-button uk-button-secondary uk-border-rounded"
                  href="#"
                >
                  Registrarse
                </a>
              </div>
            </div>

            <!-- Mobile Menu Toggle -->
            <div class="uk-hidden@l uk-navbar-right">
              <a
                class="uk-navbar-toggle"
                uk-navbar-toggle-icon="true"
                uk-toggle="target: #burger-menu"
              ></a>

              <div id="burger-menu" uk-offcanvas="overlay: true; flip: true">
                <div class="uk-offcanvas-bar">
                  <button
                    class="uk-offcanvas-close"
                    type="button"
                    uk-close="true"
                  ></button>

                  <div
                    class="uk-flex uk-flex-column uk-grid-row-small uk-margin-medium-top"
                    uk-grid="true"
                  >
                    <div class="uk-flex-left">
                      <a
                        class="uk-button uk-button-secondary uk-border-rounded"
                        href="api.html"
                      >
                        <strong>API</strong>
                      </a>
                    </div>
                    <div class="uk-flex-left uk-margin-small-left">
                      <a
                        class="uk-text-capitalize uk-button uk-button-text uk-light"
                        href="menu.html"
                      >
                        Menú
                      </a>
                    </div>
                    <div class="uk-flex-left uk-margin-small-left">
                      <a
                        class="uk-text-capitalize uk-button uk-button-text"
                        href="recomendado.html"
                      >
                        Recomendado
                      </a>
                    </div>
                    <div class="uk-flex-left uk-margin-small-left">
                      <a
                        class="uk-text-capitalize uk-button uk-button-text uk-light"
                        href="blog.html"
                      >
                        Blog
                      </a>
                    </div>
                    <div class="uk-flex-left uk-margin-small-left">
                      <a
                        class="uk-text-capitalize uk-button uk-button-text uk-light"
                        href="nosotros.html"
                      >
                        Nosotros
                      </a>
                    </div>
                    <hr class="uk-divider-icon" />
                    <div class="uk-light">
                      <button
                        id="mobile-auth-btn"
                        class="uk-text-capitalize uk-text-normal uk-button uk-button-secondary uk-border-rounded uk-width-1-1"
                        onclick="toggleAuth()"
                      >
                        Iniciar Sesión
                      </button>
                    </div>
                    <div class="uk-dark">
                      <a
                        class="uk-text-capitalize uk-text-normal uk-button uk-button-secondary uk-border-rounded uk-width-1-1"
                        href="#"
                      >
                        Registrarse
                      </a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </nav>
    </div>

    <!-- Login Modal - EXACTO AL ORIGINAL -->
    <div id="login-modal" class="uk-modal blog-login-display">
      <div class="uk-modal-dialog uk-modal-body blog-login-container">
        <button
          class="uk-modal-close-default color-text-black"
          type="button"
          onclick="closeModal()"
          uk-close
        ></button>
        <h2 class="uk-modal-title color-text-black" id="modal-title">
          Iniciar Sesión
        </h2>

        <form class="uk-form-stacked" onsubmit="handleAuth(event)">
          <div class="uk-margin">
            <label class="uk-form-label color-text-black">Usuario</label>
            <input
              id="modal-username"
              class="uk-input blog-login-input"
              type="text"
              required
            />
          </div>
          <div class="uk-margin">
            <label class="uk-form-label color-text-black">Contraseña</label>
            <input
              id="modal-password"
              class="uk-input blog-login-input"
              type="password"
              required
            />
          </div>

          <div class="uk-flex uk-flex-between">
            <button
              class="uk-button uk-button-primary blog-container-round"
              type="submit"
              id="auth-submit-btn"
            >
              Iniciar Sesión
            </button>
            <button
              class="uk-button uk-button-link"
              type="button"
              onclick="toggleAuthMode()"
            >
              ¿No tienes cuenta?
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Main Content -->
    <main
      class="uk-background-cover uk-height-viewport uk-light first-child-adjustment uk-flex uk-position-relative"
      style="background-image: url('../assets/img/coffe-soft-header.svg')"
    >
      <div class="uk-container uk-margin-large-top uk-height-1-1">
        <div
          class="uk-position-center-right uk-position-medium"
          style="max-width: 50%; padding: 20px"
        >
          <h1 class="uk-heading-large">Coffe Shop SPA</h1>

          <div class="uk-overlay uk-overlay-primary uk-padding-small">
            <p>
              Bienvenido a <strong>Nombre del Café</strong>, un lugar donde cada
              taza de café cuenta una historia. Aquí encontrarás la combinación
              perfecta de calidad, comodidad y calidez para hacer de tus mañanas
              algo especial.
            </p>
          </div>
        </div>
      </div>
    </main>

    <!-- Footer - EXACTO AL ORIGINAL -->
    <footer
      class="uk-section uk-section-small"
      style="background-color: #2f2c2c; width: 100%; z-index: 10"
    >
      <div class="uk-container">
        <div
          class="uk-flex uk-flex-between uk-flex-middle uk-grid-small"
          uk-grid=""
        >
          <div>
            <img src="../assets/img/coffe-user-logo.svg" alt="Logo" />
          </div>
          <div class="uk-text-top">
            <span class="uk-text-small uk-text-muted">Síguenos</span>
            <div class="uk-margin-small-top">
              <a
                href="https://www.x.com"
                class="uk-icon-button"
                uk-icon="icon: x"
                target="_blank"
              ></a>
              <a
                href="https://www.instagram.com"
                class="uk-icon-button uk-margin-small-left"
                uk-icon="icon: instagram"
                target="_blank"
              ></a>
              <a
                href="https://www.youtube.com"
                class="uk-icon-button uk-margin-small-left"
                uk-icon="icon: youtube"
                target="_blank"
              ></a>
              <a
                href="https://www.linkedin.com"
                class="uk-icon-button uk-margin-small-left"
                uk-icon="icon: linkedin"
                target="_blank"
              ></a>
            </div>
          </div>
        </div>
      </div>
    </footer>

    <script>
      // Estado global exactamente como el AuthContext
      let currentUser = null;
      let isRegistering = false;

      // Función para manejar autenticación (login/logout)
      function toggleAuth() {
        if (currentUser) {
          logout();
        } else {
          showModal();
        }
      }

      // Función para mostrar el modal
      function showModal() {
        document.getElementById("login-modal").classList.add("uk-open");
      }

      // Función para cerrar el modal
      function closeModal() {
        document.getElementById("login-modal").classList.remove("uk-open");
        // Reset form
        document.getElementById("modal-username").value = "";
        document.getElementById("modal-password").value = "";
      }

      // Función para alternar entre login y registro
      function toggleAuthMode() {
        isRegistering = !isRegistering;
        const title = document.getElementById("modal-title");
        const submitBtn = document.getElementById("auth-submit-btn");
        const toggleBtn = document.querySelector(".uk-button-link");

        if (isRegistering) {
          title.textContent = "Registrarse";
          submitBtn.textContent = "Registrarse";
          toggleBtn.textContent = "¿Ya tienes cuenta?";
        } else {
          title.textContent = "Iniciar Sesión";
          submitBtn.textContent = "Iniciar Sesión";
          toggleBtn.textContent = "¿No tienes cuenta?";
        }
      }

      // Función para manejar el envío del formulario
      function handleAuth(event) {
        event.preventDefault();
        const username = document.getElementById("modal-username").value.trim();
        const password = document.getElementById("modal-password").value.trim();

        if (!username || !password) return;

        // Simular login/registro (como en el original)
        login(username);
        closeModal();
      }

      // Función para login
      function login(username) {
        currentUser = username;
        updateAuthState();
      }

      // Función para logout
      function logout() {
        currentUser = null;
        updateAuthState();
      }

      // Función para actualizar el estado de la UI
      function updateAuthState() {
        const authBtn = document.getElementById("auth-btn");
        const mobileAuthBtn = document.getElementById("mobile-auth-btn");
        const currentUserSpan = document.getElementById("current-user");

        if (currentUser) {
          authBtn.textContent = "Cerrar Sesión";
          mobileAuthBtn.textContent = "Cerrar Sesión";
          currentUserSpan.textContent = currentUser;
        } else {
          authBtn.textContent = "Iniciar Sesión";
          mobileAuthBtn.textContent = "Iniciar Sesión";
          currentUserSpan.textContent = "Invitado";
        }
      }

      // Inicializar cuando se carga la página
      document.addEventListener("DOMContentLoaded", function () {
        updateAuthState();
      });
    </script>
  </body>
</html>
